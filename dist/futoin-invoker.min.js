!function(a){"function"==typeof define&&define.amd?define(["futoin-asyncsteps"],a):"object"==typeof exports?module.exports=a(require("futoin-asyncsteps")):this.FutoInInvoker=a($as)}(function(a){function b(a){var c=b.cache[a];if(!c){var d={};c=b.cache[a]={id:a,exports:d},b.modules[a].call(d,c,d)}return c.exports}var c=this;return b.cache=[],b.modules=[function(a){"use strict";function c(a){j(this),this._iface_info={},this._iface_impl={},this._impl=new h(a)}var d=b(133),e=b(9),f=e.FutoInError,g=b(138),h=b(5),i=b(3),j=b(26),k=e.Options;g(c,k);var l=d(i.prototype);c.prototype=l,l.initFromCache=function(a,b){a.error(f.NotImplemented,"Caching is not supported yet")},l.cacheInit=function(a){},a.exports=c},function(a){"use strict";function b(a){this._raw_info=a}var c={};b.prototype=c,c.name=function(){return this._raw_info.iface},c.version=function(){return this._raw_info.version},c.inherits=function(){return this._raw_info.inherits},c.funcs=function(){return this._raw_info.funcs},c.constraints=function(){return this._raw_info.constraints},a.exports=b},function(a){"use strict";function c(a,b){this._ccmimpl=a,this._raw_info=b,this._iface_info=null,this._comms={},g(this);for(var c in this._raw_info.funcs){var d=this._raw_info.funcs[c];d.rawupload||c in this||(this[c]=this._member_call_generate(c,d))}}var d=b(9),e=d.FutoInError,f=b(158),g=b(26),h=b(27),i=b(1),j=d.Options.FUTOIN_CONTENT_TYPE,k={};c.prototype=k,k.call=function(a,b,c,d,f,g){c=c||{};var i=this._raw_info,k={ccmimpl:this._ccmimpl,name:b,info:i,upload_data:d,download_stream:f,rsp_content_type:null,native_iface:this,options:i.options,endpoint:i.endpoint,expect_response:!0,signMessage:this._signMessageDummy},l=this._ccmimpl;a.add(function(a){l.createMessage(a,k,c)}),a.add(function(a,c){var m;k.expect_response?(m=a,"number"!=typeof g&&(g=k.info.options.callTimeoutMS),g>0&&m.setTimeout(g)):m=h();var n=i.endpoint_scheme;if("#internal#"===n)k.endpoint.onInternalRequest(m,i,c,d,f);else if("http"===n||"https"===n)l.perfomHTTP(m,k,c);else if("ws"===n||"wss"===n){var o,p=k.download_stream||k.info.funcs&&(o=k.info.funcs[b])&&o.rawresult;k.upload_data||p?(k.endpoint=k.endpoint.replace("ws","http"),k.rawresult=p,l.perfomHTTP(m,k,c)):l.perfomWebSocket(m,k,c)}else k.upload_data?m.error(e.InvokerError,"Upload data is allowed only for HTTP/WS endpoints"):k.download_stream?m.error(e.InvokerError,"Download stream is allowed only for HTTP/WS endpoints"):"browser"===n?l.perfomBrowser(m,k,c):"unix"===n?l.perfomUNIX(m,k,c):"callback"===n?k.endpoint(m,k,c):m.error(e.InvokerError,"Unknown endpoint scheme");m!==a?(m.execute(),a.success()):m.add(function(a,b,c){if(k.download_stream)a.success(!0);else if(c===j||c===!0){if("string"==typeof b)try{b=JSON.parse(b)}catch(d){a.error(e.CommError,"JSON:"+d.message)}l.onMessageResponse(a,k,b)}else l.onDataResponse(a,k,b)})})},k._member_call_intercept=function(a,b,c,d){var g=c.params,h=Object.keys(g);d.length>h.length?a.error(e.InvokerError,"Unknown parameters"):d.length<c.min_args?a.error(e.InvokerError,"Missing parameters"):d.length<h.length&&(h=h.splice(0,d.length));var i=f(h,d);this.call(a,b,i)},k._member_call_generate=function(a,b){return function(c){this._member_call_intercept(c,a,b,Array.prototype.slice.call(arguments,1))}},k.ifaceInfo=function(){return this._iface_info||(this._iface_info=new i(this._raw_info)),this._iface_info},k.bindDerivedKey=function(a){throw new Error(e.InvokerError,"Not Implemented")},k._close=function(){var a=this._comms;for(var b in a)a[b].close();this.emit("close")},k._signMessageDummy=function(){},a.exports=c},function(a){"use strict";function c(a){j(this),this._iface_info={},this._iface_impl={},this._impl=new i(a)}var d=b(9),e=d.FutoInError,f=b(2),g=b(138),h=b(135),i=b(6),j=b(26),k=d.Options;g(c,k);var l={};c.prototype=l,g(l,k),l._secure_replace=/^secure\+/,l._secure_test=/^(https|wss|unix):\/\//,l._native_iface_builder=function(a,b){return new f(a,b)},l.register=function(a,b,c,f,g,i){var j=null===b;!j&&b in this._iface_info&&a.error(e.InvokerError,"Already registered");var k=c.match(d._ifacever_pattern);null===k&&a.error(e.InvokerError,"Invalid ifacever");var l,m=k[1],n=k[4],o=k[5],p=k[6],q=!1,r=null,s=!1;if(j)l="callback",s=!0;else if("string"==typeof f)switch(this._secure_replace.test(f)?(q=!0,f=f.replace(this._secure_replace,"")):this._secure_test.test(f)&&(q=!0),r=this._native_iface_builder,l=f.split(":")[0]){case"http":case"https":break;case"ws":case"wss":case"unix":s=!0;break;case"browser":i&&i.targetOrigin&&(q=!0),s=!0;break;default:a.error(e.InvokerError,"Unknown endpoint schema")}else"onInternalRequest"in f?(q=!0,r=this._native_iface_builder,l="#internal#",s=!0):(q=!0,r=f,f=null,l=null,s=!0);i=i||{},h(i,this._impl.options);var t={iface:m,version:n,mjrver:o,mnrver:p,endpoint:f,endpoint_scheme:l,creds:g||null,creds_master:"master"===g,creds_hmac:g&&"-hmac:"===g.substr(0,6),secure_channel:q,impl:r,regname:b,inherits:null,funcs:null,constraints:null,options:i,_invoker_use:!0,_user_info:null};!t.creds_hmac||i.hmacKey&&i.hmacAlgo||a.error(e.InvokerError,"Missing options.hmacKey or options.hmacAlgo"),b&&(this._iface_info[b]=t);var u=this;a.add(function(a){u._impl.onRegister(a,t),a.add(function(a){t.simple_req||("AllowAnonymous"in t.constraints||t.creds||a.error(e.SecurityError,"Requires authenticated user"),"SecureChannel"in t.constraints&&!q&&a.error(e.SecurityError,"SecureChannel is required"),"MessageSignature"in t.constraints&&!t.creds_master&&!t.creds_hmac&&a.error(e.SecurityError,"SecureChannel is required"),"BiDirectChannel"in t.constraints&&!s&&a.error(e.InvokerError,"BiDirectChannel is required")),j&&a.success(t,u._native_iface_builder(u._impl,t)),u.emit("register",b,c,t)})},function(a,c){b&&delete u._iface_info[b]})},l.iface=function(a){var b=this._iface_info[a];if(!b)throw new Error(e.InvokerError);var c=b.regname,d=this._iface_impl[c];if(!d){var f=b.options.nativeImpl;d=f?new f(this._impl,b):b.impl(this._impl,b),this._iface_impl[c]=d}return d},l.unRegister=function(a){var b=this._iface_info[a];if(!b)throw new Error(e.InvokerError);var c=b.regname;if(c===a){delete this._iface_info[c];var d=this._iface_impl[c];if(d&&(d._close(),delete this._iface_impl[c]),b.aliases)for(var f=b.aliases,g=0;g<f.length;++g)delete this._iface_info[f[g]]}else delete this._iface_info[a],b.aliases.splice(b.aliases.indexOf(a),0);this.emit("unregister",a,b)},l.defense=function(){return this.iface(this.SVC_DEFENSE)},l.log=function(){return this.iface(this.SVC_LOG)},l.cache=function(a){return this.iface(this.SVC_CACHE_+(a||"default"))},l.assertIface=function(a,b){var c=this._iface_info[a];if(!c)throw new Error(e.InvokerError);var f=b.match(d._ifacever_pattern);if(null===f)throw new Error(e.InvokerError);var g=f[1],h=f[5],i=f[6];if(c.iface!==g||c.mjrver!==h||c.mnrver<i)throw new Error(e.InvokerError)},l.alias=function(a,b){var c=this._iface_info[a];if(!c||this._iface_info[b])throw new Error(e.InvokerError);this._iface_info[b]=c,c.aliases?c.aliases.push(b):c.aliases=[b],this.emit("register",b,c.iface+":"+c.version,c)},l.close=function(){var a=this._iface_impl;for(var b in a)a[b]._close();var c=this._impl.comms;for(var d in c)c[d].close();this.emit("close")},a.exports=c},function(a){"use strict";var c,d,e=b(9),f=e.FutoInError,g=b(12),h=b(134),i=b(158),j=b(136),k=b(138);if(g){var l=require;c=l("fs"),d=l("request")}var m={standard_errors:{UnknownInterface:!0,NotSupportedVersion:!0,NotImplemented:!0,Unauthorized:!0,InternalError:!0,InvalidRequest:!0,DefenseRejected:!0,PleaseReauth:!0,SecurityError:!0},_ver_pattern:/^([0-9]+)\.([0-9]+)$/,_ifacever_pattern:e._ifacever_pattern,_max_supported_v1_minor:3,loadIface:function(a,b,e,h){var i,j,l=null,n=b.iface+"-"+b.version+"-iface.json";if(h){if(j=b.iface+":"+b.version+(b._invoker_use?":i":":e"),i=h[j])return void k(b,i);i={_invoker_use:b._invoker_use}}else i=b;a.forEach(e,function(a,e,f){a.add(function(a){if("string"==typeof f&&g){var b=f+"/"+n,e=function(b){if(a){try{return f=JSON.parse(b),f._just_loaded=!0,void a.success()}catch(c){}try{a["continue"]()}catch(c){}}};"http"===b.substr(0,4)?d(b,function(a,b,c){e(c)}):c.readFile(b,{encoding:"utf8"},function(a,b){e(b)}),a.setCancel(function(b){a=null})}}).add(function(a){if("string"==typeof f&&!g){var b=f+"/"+n,c=new XMLHttpRequest;c.onreadystatechange=function(){if(this.readyState===this.DONE){var b=this.responseText;if(b)try{return f=JSON.parse(b),f._just_loaded=!0,void a.success()}catch(c){}try{a["continue"]()}catch(d){}}},c.open("GET",b,!0),c.send(),a.setCancel(function(a){c.abort()})}}).add(function(a){"object"==typeof f&&f.iface===b.iface&&f.version===b.version&&(l=f,a["break"]())})}).add(function(a){null===l&&a.error(f.InternalError,"Failed to load valid spec for "+b.iface+":"+b.version),m.parseIface(a,i,e,l)}),h&&a.add(function(a){h[j]=i,k(b,i)})},parseIface:function(a,b,c,d){if(d._just_loaded?(b.funcs=d.funcs||{},b.types=d.types||{}):(b.funcs=h(d.funcs||{}),b.types=h(d.types||{})),m._parseFuncs(a,b),m._parseTypes(a,b),"requires"in d){var g=d.requires;Array.isArray(g)||a.error(f.InternalError,'"requires" is not array'),b.constraints=i(g,g)}else b.constraints={};if(m._checkFTN3Rev(a,b,d),b.inherits=[],"inherit"in d){var j=d.inherit.match(e._ifacever_pattern);null===j&&a.error(f.InvokerError,"Invalid inherit ifacever: "+d.inherit);var k={};k.iface=j[1],k.version=j[4],m.loadIface(a,k,c),a.add(function(a){m._parseImportInherit(a,b,c,d,k),b.inherits.push(d.inherit),b.inherits=b.inherits.concat(k.inherits)})}"imports"in d?(b.imports=d.imports.slice(),a.forEach(d.imports,function(a,g,h){var i=h.match(e._ifacever_pattern);null===i&&a.error(f.InvokerError,"Invalid import ifacever: "+h);var j={};j.iface=i[1],j.version=i[4],m.loadIface(a,j,c),a.add(function(a){m._parseImportInherit(a,b,c,d,j),b.imports=b.imports.concat(j.imports)})})):b.imports=[]},_checkFTN3Rev:function(a,b,c){var d=c.ftn3rev||"1.0",e=d.match(m._ver_pattern);null===e&&a.error(f.InternalError,"Invalid ftn3rev field");var g=parseInt(e[1]),h=parseInt(e[2]);if(1===g){if(1>h&&(c.imports||c.types||"BiDirectChannel"in b.constraints)&&a.error(f.InternalError,"Missing ftn3rev or wrong field for FTN3 v1.1 features"),2>h&&"MessageSignature"in b.constraints&&a.error(f.InternalError,"Missing ftn3rev or wrong field for FTN3 v1.2 features"),3>h)for(var i in b.funcs)b.funcs[i].seclvl&&a.error(f.InternalError,"Missing ftn3rev or wrong field for FTN3 v1.3 features");!b._invoker_use&&h>m._max_supported_v1_minor&&a.error(f.InternalError,"Not supported FTN3 revision for Executor")}else a.error(f.InternalError,"Not supported FTN3 revision")},_parseFuncs:function(a,b){var c,d;for(var e in b.funcs){if(c=b.funcs[e],c.min_args=0,"params"in c){var g=c.params;"object"!=typeof g&&a.error(f.InternalError,"Invalid params object");for(d in g){var h=g[d];"object"!=typeof h&&a.error(f.InternalError,"Invalid param object"),"type"in h||a.error(f.InternalError,"Missing type for params"),"default"in h||(c.min_args+=1)}}else c.params={};if(c.expect_result=!1,"result"in c){var j=c.result;"object"!=typeof j&&a.error(f.InternalError,"Invalid result object");for(var k in j){var l=j[k];"object"!=typeof l&&a.error(f.InternalError,"Invalid resultvar object"),"type"in l||a.error(f.InternalError,"Missing type for result"),c.expect_result=!0}}else c.result={};if("rawupload"in c||(c.rawupload=!1),"rawresult"in c||(c.rawresult=!1),c.rawresult&&(c.expect_result=!0),"throws"in c){c.expect_result||a.error(f.InternalError,'"throws" without result');var m=c["throws"];Array.isArray(m)||a.error(f.InternalError,'"throws" is not array'),c["throws"]=i(m,m)}else c["throws"]={}}},_parseTypes:function(a,b){var c;for(var d in b.types)if(c=b.types[d],"type"in c||a.error(f.InternalError,'Missing "type" for custom type'),"map"===c.type){if(!("fields"in c)){c.fields={};continue}for(var e in c.fields)"type"in c.fields[e]||a.error(f.InternalError,'Missing "type" for custom type field')}},_parseImportInherit:function(a,b,c,d,e){var g,h;for(var i in e.types)i in b.types?a.error(f.InternalError,"Iface type redifintion: "+i):b.types[i]=e.types[i];for(var k in e.funcs){var l=e.funcs[k];if(k in b.funcs){var m=l.params,n=b.funcs[k].params,o=Object.keys(m),p=Object.keys(n);for(p.length<o.length&&a.error(f.InternalError,"Invalid param count for '"+k+"'"),g=0;g<o.length;++g)h=o[g],h!==p[g]&&a.error(f.InternalError,"Invalid param order for '"+k+"/"+h+"'"),m[h].type!==n[h].type&&a.error(f.InternalError,"Param type mismatch '"+k+"/"+h+"'");for(;g<p.length;++g)h=p[g],h in m||"default"in n[h]||null===n[h]||a.error(f.InternalError,"Missing default for '"+k+"/"+h+"'");l.rawresult!==b.funcs[k].rawresult&&a.error(f.InternalError,"'rawresult' flag mismatch for '"+k+"'"),l.seclvl!==b.funcs[k].seclvl&&a.error(f.InternalError,"'seclvl' mismatch for '"+k+"'"),l.rawupload&&!b.funcs[k].rawupload&&a.error(f.InternalError,"'rawupload' flag is missing for '"+k+"'")}else b.funcs[k]=l}j(Object.keys(e.constraints),d.requires).length&&a.error(f.InternalError,"Missing constraints from inherited")},checkConsistency:function(a,b){},checkType:function(a,b,c,d){if(null===c)return!1;switch(b){case"any":return!0;case"boolean":case"string":case"number":return typeof c===b;case"map":return"object"==typeof c&&!(c instanceof Array);case"integer":return"number"==typeof c&&(0|c)===c;case"array":return c instanceof Array;default:if(!("types"in a&&b in a.types))return!1}if(b in a.types){var e=a.types[b];d=d||{};var g=e.type;if(g in d)throw console&&console.log("[ERROR] Custom type recursion: "+e.type),new Error(f.InternalError);if(d[b]=!0,d["#last_base"]=g,!this.checkType(a,g,c,d))return!1;switch(d["#last_base"]){case"integer":case"number":return"min"in e&&c<e.min?!1:"max"in e&&c>e.max?!1:!0;case"string":if("regex"in e){var h;return"_comp_regex"in a?h=a._comp_regex:(h={},a._comp_regex=h),b in h||(h[b]=new RegExp(e.regex)),null!==c.match(h[b])}return!0;case"array":var i=c.length;if("minlen"in e&&i<e.minlen)return!1;if("maxlen"in e&&i>e.maxlen)return!1;if("elemtype"in e)for(var j=e.elemtype,k=0;i>k;++k)if(!this.checkType(a,j,c[k],null))return!1;return!0;case"map":if(!("fields"in e))return!0;var l=e.fields;for(var m in l){var n=l[m];if(!(m in c)||null===c[m])return n.optional?(c[m]=null,!0):!1;if(!this.checkType(a,n.type,c[m],null))return!1}return!0}}return!1},checkParameterType:function(a,b,c,d){return m.checkType(a,a.funcs[b].params[c].type,d)},checkResultType:function(a,b,c,d,e){m.checkType(b,b.funcs[c].result[d].type,e)||a.error(f.InvalidRequest,"Type mismatch for result: "+d)},checkFutoInType:function(a,b,c,d){m.checkType({},b,d)||a.error(f.InvalidRequest,"Type mismatch for parameter: "+c)},genHMAC:function(a,b,c){a.error(f.InvalidRequest,"HMAC generation is supported only for server environment")}};g&&l("./lib/node/spectools_hmac")(m),a.exports=m},function(a){"use strict";function c(a){a=a||{},h(a,i);var b=a.specDirs||[];b instanceof Array||(b=[b]),a.specDirs=b,f.call(this,a),this._load_cache={}}var d=b(9),e=d.FutoInError,f=b(6),g=b(4),h=b(135),i={specDirs:[],hmacKey:null,hmacAlgo:"MD5",sendOnBehalfOf:!0},j=f.prototype;c.prototype={onRegister:function(a,b){!b.creds_master&&!b.creds_hmac||g.checkHMAC||a.error(e.InvokerError,"Master/HMAC is not supported in this environment yet"),g.loadIface(a,b,b.options.specDirs,this._load_cache),b.options.prodMode||g.checkConsistency(a,b)},checkParams:function(a,b,c){var d,f=b.info,h=b.name;h in f.funcs||a.error(e.InvokerError,"Unknown interface function: "+h);var i=f.funcs[h];b.upload_data&&!i.rawupload&&a.error(e.InvokerError,"Raw upload is not allowed"),!Object.keys(i.params).length&&Object.keys(c).length&&a.error(e.InvokerError,"No params are defined");for(d in c)i.params.hasOwnProperty(d)||a.error(e.InvokerError,"Unknown parameter: "+d),g.checkParameterType(f,h,d,c[d])||a.error(e.InvalidRequest,"Type mismatch for parameter: "+d);for(d in i.params)c.hasOwnProperty(d)||i.params[d].hasOwnProperty("default")||a.error(e.InvokerError,"Missing parameter "+d)},createMessage:function(a,b,c){var d=b.info,f=d.options;f.prodMode||this.checkParams(a,b,c);var h={f:d.iface+":"+d.version+":"+b.name,p:c};if(f.sendOnBehalfOf){var i=a.state.reqinfo;if(i){var j=i.info,k=j.USER_INFO;h.obf=k?{lid:k.localID(),gid:k.globalID(),slvl:j.SECURITY_LEVEL}:{slvl:"Anonymous"}}}b.expect_response=d.funcs[b.name].expect_result,null!==d.creds&&(d.creds_master?(a.error(e.InvokerError,"MasterService support is not implemented"),b.signMessage=function(a){}):d.creds_hmac?b.signMessage=function(b){b.sec=d.creds+":"+f.hmacAlgo+":"+g.genHMAC(a,d.options,b).toString("base64")}:h.sec=d.creds),a.success(h)},onMessageResponse:function(a,b,c){var d=b.info,f=b.name,h=d.funcs[f];if(d.creds_master)a.error(e.InvokerError,"MasterService support is not implemented");else if(d.creds_hmac){var i;try{i=new Buffer(c.sec,"base64")}catch(j){a.error(e.SecurityError,"Missing response HMAC")}delete c.sec;var k=g.genHMAC(a,d.options,c);g.checkHMAC(i,k)||a.error(e.SecurityError,"Response HMAC mismatch")}if("e"in c){var j=c.e;j in h["throws"]||j in g.standard_errors?a.error(j,c.edesc):a.error(e.InternalError,"Not expected exception from Executor")}h.rawresult&&a.error(e.InternalError,"Raw result is expected"),"master"===d.creds;var l=h.result,m=Object.keys(l).length;for(var n in c.r)l.hasOwnProperty(n)&&(g.checkResultType(a,d,f,n,c.r[n]),--m);m>0&&a.error(e.InternalError,"Missing result variables"),a.success(c.r)},onDataResponse:function(a,b,c){b.info.funcs[b.name].rawresult?a.success(c):a.error(e.InternalError,"Raw result is not expected")},getComms:j.getComms,performCommon:j.performCommon,perfomHTTP:j.perfomHTTP,perfomWebSocket:j.perfomWebSocket,perfomUNIX:j.perfomUNIX,perfomBrowser:j.perfomBrowser},a.exports=c},function(a){"use strict";function c(a){a=a||{},h(a,j),this.options=a,this.comms={}}var d,e=b(9),f=e.FutoInError,g=b(12),h=b(135);if(g){var i=require;d=i("./node/comms")}else d=b(8);var j={callTimeoutMS:3e4,prodMode:!1,commConfigCallback:null,messageSniffer:function(){},disconnectSniffer:function(){},executor:null,targetOrigin:null,retryCount:1};c.prototype={onRegister:function(a,b){(b.creds_master||b.creds_hmac)&&a.error(f.InvokerError,"Master/HMAC is supported only in AdvancedCCM"),b.funcs={},b.inherits=[],b.constraints={},b.simple_req=!0},createMessage:function(a,b,c){var d=b.info,e={f:d.iface+":"+d.version+":"+b.name,p:c,forcersp:!0};null!==d.creds&&"master"!==d.creds&&(e.sec=d.creds),a.success(e)},onMessageResponse:function(a,b,c){"e"in c?a.error(c.e,c.edesc):a.success(c.r)},onDataResponse:function(a,b,c){a.success(c)},getComms:function(a,b,c,d){var e,g,h=b.options,i=this.options;h.executor!==i.executor||h.messageSniffer!==i.messageSniffer||h.disconnectSniffer!==i.disconnectSniffer||h.commConfigCallback!==i.commConfigCallback?(e=b.native_iface._comms,g=b.info.endpoint_scheme):(e=this.comms,g=b.endpoint+"##"+(b.credentials||"")+"##"+(d||""));var j=e[g];return j||(c||a.error(f.InvokerError,"Not implemented "+b.info.endpoint_scheme+" scheme"),j=new c,e[g]=j),j},performCommon:function(a,b,c,d){var e,g,h=b.options.retryCount;a.repeat(h+1,function(a,i){a.add(function(a){d.perform(a,b,c),a.add(function(a,b,c){e=b,g=c,a["break"]()})},function(a,d){d===f.CommError&&(b.native_iface.emit("commError",a.state.error_info,c),h>i&&a["continue"]())})}).add(function(a){a.success(e,g)})},perfomHTTP:function(a,b,c){var e=this.getComms(a,b,d.HTTPComms);this.performCommon(a,b,c,e)},perfomWebSocket:function(a,b,c){var e=this.getComms(a,b,d.WSComms);this.performCommon(a,b,c,e)},perfomUNIX:function(a,b,c){a.error(f.InvokerError,"Not implemented unix:// scheme")},perfomBrowser:function(a,b,c){var e=this.getComms(a,b,d.BrowserComms,b.options.targetOrigin);e.perform(a,b,c)}},a.exports=c},function(a){!function(c){"use strict";var d=c.FutoIn||{};if("undefined"==typeof d.Invoker){var e=b(10),f=e.SimpleCCM;c.SimpleCCM=f;var g=e.AdvancedCCM;c.AdvancedCCM=g,d.Invoker=e,c.FutoInInvoker=e,c.FutoIn=d,a&&(a.exports=e)}}(window)},function(a,c){"use strict";var d=b(26),e=b(9),f=e.FutoInError,g=WebSocket,h=e.Options.FUTOIN_CONTENT_TYPE;c.HTTPComms=function(){},c.HTTPComms.prototype={close:function(){},perform:function(a,b,c){var d=this;a.add(function(a){d._perform(a,b,c)})},_perform:function(a,b,c){b.signMessage(c);var d,e,g=b.options.messageSniffer,i=new XMLHttpRequest,j=b.endpoint,k=b.upload_data;if(k||""===k){d="application/octet-stream","/"!==j.charAt(j.length-1)&&(j+="/"),j+=c.f.replace(/:/g,"/")+"/","sec"in c&&(c.sec===b.options.credentials?e="Basic "+window.btoa(c.sec):j+=c.sec+"/");var l=[];for(var m in c.p){var n=c.p[m];"string"!=typeof n&&(n=JSON.stringify(n)),l.push(encodeURIComponent(m)+"="+encodeURIComponent(n))}j+="?"+l.join("&"),g(b.info,c,!1)}else d=h,k=JSON.stringify(c),g(b.info,k,!1);b.expect_response&&(b.download_stream&&(i.responseType=b.download_stream),i.onreadystatechange=function(){if(this.readyState===this.DONE){var c=b.download_stream?this.response:this.responseText;if(c){var d=this.getResponseHeader("content-type");d===h?g(b.info,c,!0):g(b.info,"%DATA%",!0),a.success(c,d)}else try{a.error(f.CommError,"Low error")}catch(e){}}},a.setCancel(function(){i.abort()})),i.open("POST",j,!0),i.setRequestHeader("Content-Type",d),e&&i.setRequestHeader("Authorization",e),i.send(k),b.expect_response||a.success()}},c.WSComms=function(){this.rid=1,this.reqas={},this.evt=d()},c.WSComms.prototype={_waiting_open:!1,init:function(a,b){var c=b.options,d=new g(b.endpoint);this.ws=d,this._waiting_open=!0;var e=this.reqas,h=c.executor||null,i=b.info,j=this,k=c.messageSniffer;this.sniffer=k;var l=function(a){var b=h.packPayloadJSON(a);k(i,b,!1),d.send(b)},m=function(a){c.disconnectSniffer(i),d.close(),delete j.ws;for(var g in e)try{e[g].error(f.CommError,a.wasClean?"Cleanup":"Error")}catch(h){}delete j.reqas,j.reqas={},j._waiting_open=!1,b.native_iface.emit("disconnect")};d.onclose=m,d.onerror=m,d.onopen=function(a){j._waiting_open=!1,j.evt.emit("open"),b.native_iface.emit("connect")},d.onmessage=function(a){k(i,a.data,!0);var b;try{b=JSON.parse(a.data)}catch(c){return}if("rid"in b){var d=b.rid;d in e?(e[d].success(b,!0),delete e[d]):"S"===d.charAt(0)&&h&&h.onEndpointRequest(i,b,l)}}},close:function(){this.ws&&this.ws.close()},perform:function(a,b,c){var d=this;"ws"in this||d.init(a,b),this._waiting_open&&a.add(function(a){if(d._waiting_open){var b=function(){a.success()};d.evt.once("open",b),a.setCancel(function(){d.evt.off("open",b)})}}),a.add(function(a){d._perform(a,b,c)})},_perform:function(a,b,c){"ws"in this||a.error(f.CommError,"Disconnect while in progress");var d=this.reqas,e="C"+this.rid++;c.rid=e,b.signMessage(c),b.expect_response&&(d[e]=a,a.setCancel(function(){delete d[e]}));var g=JSON.stringify(c);this.sniffer(b.info,g,!1),this.ws.send(g)}},g||(c.WSComms=c.HTTPComms),c.BrowserComms=function(){this.rid=1,this.reqas={}},c.BrowserComms.prototype={init:function(a,b){var c=b.options;this.opts=c;var d,e=b.endpoint.split("://",2)[1],g=window;if("parent"===e)e=g.parent;else if(e in g&&"postMessage"in g[e])e=g[e];else{var h=document;d=h.getElementById(e),d?e=d.contentWindow:a.error(f.CommError,"Unknown target: "+e)}e===g&&a.error(f.CommError,"Target matches current window"),this.target=e;var i=this.reqas,j=c.executor||null,k=b.info,l=c.targetOrigin,m=c.messageSniffer;this.sniffer=m;var n=function(a){m(l,a,!1),e.postMessage(a,l||"*")},o=function(a){if(m(k,a.data,!0),!a.source||a.source===e){if(l){if(a.origin!==l)return console.log("Error: peer origin mismatch "),console.log("Error >origin: "+a.origin),void console.log("Error >required: "+l)}else;var b=a.data;if("object"!=typeof b)return void console.log("Not object response: "+b);if("rid"in b){var c=b.rid;if(!("f"in b)&&c in i)i[c].success(b,!0),delete i[c];else{if(!("f"in b&&"S"===c.charAt(0)&&j))return;j.onEndpointRequest(k,b,n)}a.stopPropagation&&a.stopPropagation()}}};g.addEventListener("message",o,!1),b.native_iface.emit("connect")},close:function(){this.target&&(this.target=null)},perform:function(a,b,c){(b.upload_data||b.download_stream)&&a.error(f.CommError,"Raw Data is not supported by Web Messaging yet"),this.target||this.init(a,b);var d=this;a.add(function(a){var e=d.reqas,f="C"+d.rid++;c.rid=f,b.signMessage(c),b.expect_response&&(e[f]=a,a.setCancel(function(a){delete e[f]})),d.sniffer(b.info,c,!1),d.target.postMessage(c,d.opts.targetOrigin||"*")})}}},function(a,c){"use strict";var d=b(27);c.AsyncSteps=d,c.FutoInError=d.FutoInError,c.Options={SAFE_PAYLOAD_LIMIT:65536,SVC_RESOLVER:"#resolver",SVC_AUTH:"#auth",SVC_DEFENSE:"#defense",SVC_ACL:"#acl",SVC_LOG:"#log",SVC_CACHE_:"#cache.",FUTOIN_CONTENT_TYPE:"application/futoin+json"},c._ifacever_pattern=/^(([a-z][a-z0-9]*)(\.[a-z][a-z0-9]*)*):(([0-9]+)\.([0-9]+))$/},function(a,c){"use strict";var d=b(9);c.SimpleCCM=b(3),c.AdvancedCCM=b(0),c.FutoInError=d.FutoInError,c.InterfaceInfo=b(1),c.NativeIface=b(2),c.SpecTools=b(4)},function(a){"use strict";var c,d=b(13),e=b(20),f=b(16),g=b(23);c=a.exports=function(a,b){var c,f,h,i,j;return arguments.length<2||"string"!=typeof a?(i=b,b=a,a=null):i=arguments[2],null==a?(c=h=!0,f=!1):(c=g.call(a,"c"),f=g.call(a,"e"),h=g.call(a,"w")),j={value:b,configurable:c,enumerable:f,writable:h},i?d(e(i),j):j},c.gs=function(a,b,c){var h,i,j,k;return"string"!=typeof a?(j=c,c=b,b=a,a=null):j=arguments[3],null==b?b=void 0:f(b)?null==c?c=void 0:f(c)||(j=c,c=void 0):(j=b,b=c=void 0),null==a?(h=!0,i=!1):(h=g.call(a,"c"),i=g.call(a,"e")),k={get:b,set:c,configurable:h,enumerable:i},j?d(e(j),k):k}},function(a){a.exports=!1;try{a.exports="[object process]"===Object.prototype.toString.call(c.process)}catch(b){}},function(a){"use strict";a.exports=b(14)()?Object.assign:b(15)},function(a){"use strict";a.exports=function(){var a,b=Object.assign;return"function"!=typeof b?!1:(a={foo:"raz"},b(a,{bar:"dwa"},{trzy:"trzy"}),a.foo+a.bar+a.trzy==="razdwatrzy")}},function(a){"use strict";var c=b(17),d=b(22),e=Math.max;a.exports=function(a,b){var f,g,h,i=e(arguments.length,2);for(a=Object(d(a)),h=function(c){try{a[c]=b[c]}catch(d){f||(f=d)}},g=1;i>g;++g)b=arguments[g],c(b).forEach(h);if(void 0!==f)throw f;return a}},function(a){"use strict";a.exports=function(a){return"function"==typeof a}},function(a){"use strict";a.exports=b(18)()?Object.keys:b(19)},function(a){"use strict";a.exports=function(){try{return Object.keys("primitive"),!0}catch(a){return!1}}},function(a){"use strict";var b=Object.keys;a.exports=function(a){return b(null==a?a:Object(a))}},function(a){"use strict";var b=Array.prototype.forEach,c=Object.create,d=function(a,b){var c;for(c in a)b[c]=a[c]};a.exports=function(){var a=c(null);return b.call(arguments,function(b){null!=b&&d(Object(b),a)}),a}},function(a){"use strict";a.exports=function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");return a}},function(a){"use strict";a.exports=function(a){if(null==a)throw new TypeError("Cannot use null or undefined");return a}},function(a){"use strict";a.exports=b(24)()?String.prototype.contains:b(25)},function(a){"use strict";var b="razdwatrzy";a.exports=function(){return"function"!=typeof b.contains?!1:b.contains("dwa")===!0&&b.contains("foo")===!1}},function(a){"use strict";var b=String.prototype.indexOf;a.exports=function(a){return b.call(this,a,arguments[1])>-1}},function(a,c){"use strict";var d,e,f,g,h,i,j,k=b(11),l=b(21),m=Function.prototype.apply,n=Function.prototype.call,o=Object.create,p=Object.defineProperty,q=Object.defineProperties,r=Object.prototype.hasOwnProperty,s={configurable:!0,enumerable:!1,writable:!0};d=function(a,b){var c;return l(b),r.call(this,"__ee__")?c=this.__ee__:(c=s.value=o(null),p(this,"__ee__",s),s.value=null),c[a]?"object"==typeof c[a]?c[a].push(b):c[a]=[c[a],b]:c[a]=b,this},e=function(a,b){var c,e;return l(b),e=this,d.call(this,a,c=function(){f.call(e,a,c),m.call(b,this,arguments)}),c.__eeOnceListener__=b,this},f=function(a,b){var c,d,e,f;if(l(b),!r.call(this,"__ee__"))return this;if(c=this.__ee__,!c[a])return this;if(d=c[a],"object"==typeof d)for(f=0;e=d[f];++f)(e===b||e.__eeOnceListener__===b)&&(2===d.length?c[a]=d[f?0:1]:d.splice(f,1));else(d===b||d.__eeOnceListener__===b)&&delete c[a];return this},g=function(a){var b,c,d,e,f;if(r.call(this,"__ee__")&&(e=this.__ee__[a]))if("object"==typeof e){for(c=arguments.length,f=new Array(c-1),b=1;c>b;++b)f[b-1]=arguments[b];for(e=e.slice(),b=0;d=e[b];++b)m.call(d,this,f)}else switch(arguments.length){case 1:n.call(e,this);break;case 2:n.call(e,this,arguments[1]);break;case 3:n.call(e,this,arguments[1],arguments[2]);break;default:for(c=arguments.length,f=new Array(c-1),b=1;c>b;++b)f[b-1]=arguments[b];m.call(e,this,f)}},h={on:d,once:e,off:f,emit:g},i={on:k(d),once:k(e),off:k(f),emit:k(g)},j=q({},i),a.exports=c=function(a){return null==a?o(j):q(Object(a),i)},c.methods=h},function(b){b.exports=a},function(a){var c=b(86),d=b(121),e=c(d,"DataView");a.exports=e},function(a){function c(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}var d=b(91),e=b(92),f=b(93),g=b(94),h=b(95);c.prototype.clear=d,c.prototype["delete"]=e,c.prototype.get=f,c.prototype.has=g,c.prototype.set=h,a.exports=c},function(a){function c(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}var d=b(109),e=b(110),f=b(111),g=b(112),h=b(113);c.prototype.clear=d,c.prototype["delete"]=e,c.prototype.get=f,c.prototype.has=g,c.prototype.set=h,a.exports=c},function(a){var c=b(86),d=b(121),e=c(d,"Map");a.exports=e},function(a){function c(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}var d=b(114),e=b(115),f=b(116),g=b(117),h=b(118);c.prototype.clear=d,c.prototype["delete"]=e,c.prototype.get=f,c.prototype.has=g,c.prototype.set=h,a.exports=c},function(a){var c=b(86),d=b(121),e=c(d,"Promise");a.exports=e},function(a){var c=b(121),d=c.Reflect;a.exports=d},function(a){var c=b(86),d=b(121),e=c(d,"Set");a.exports=e},function(a){function c(a){var b=-1,c=a?a.length:0;for(this.__data__=new d;++b<c;)this.add(a[b])}var d=b(32),e=b(122),f=b(123);c.prototype.add=c.prototype.push=e,c.prototype.has=f,a.exports=c},function(a){function c(a){this.__data__=new d(a)}var d=b(30),e=b(125),f=b(126),g=b(127),h=b(128),i=b(129);c.prototype.clear=e,c.prototype["delete"]=f,c.prototype.get=g,c.prototype.has=h,c.prototype.set=i,a.exports=c},function(a){var c=b(121),d=c.Symbol;a.exports=d},function(a){var c=b(121),d=c.Uint8Array;a.exports=d},function(a){var c=b(86),d=b(121),e=c(d,"WeakMap");a.exports=e},function(a){function b(a,b){return a.set(b[0],b[1]),a}a.exports=b},function(a){function b(a,b){return a.add(b),a}a.exports=b},function(a){function b(a,b,c){var d=c.length;switch(d){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}a.exports=b},function(a){function b(a,b){for(var c=-1,d=a?a.length:0;++c<d&&b(a[c],c,a)!==!1;);return a}a.exports=b},function(a){function c(a,b){var c=a?a.length:0;return!!c&&d(a,b,0)>-1}var d=b(60);a.exports=c},function(a){function b(a,b,c){for(var d=-1,e=a?a.length:0;++d<e;)if(c(b,a[d]))return!0;return!1}a.exports=b},function(a){function b(a,b){for(var c=-1,d=a?a.length:0,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}a.exports=b},function(a){function b(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}a.exports=b},function(a){function b(a,b,c,d){var e=-1,f=a?a.length:0;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}a.exports=b},function(a){function c(a,b,c,g){return void 0===a||d(a,e[c])&&!f.call(g,c)?b:a}var d=b(137),e=Object.prototype,f=e.hasOwnProperty;a.exports=c},function(a){function c(a,b,c){var e=a[b];f.call(a,b)&&d(e,c)&&(void 0!==c||b in a)||(a[b]=c)}var d=b(137),e=Object.prototype,f=e.hasOwnProperty;a.exports=c},function(a){function c(a,b){for(var c=a.length;c--;)if(d(a[c][0],b))return c;return-1}var d=b(137);a.exports=c},function(a){function c(a,b){return a&&d(b,e(b),a)}var d=b(79),e=b(150);a.exports=c},function(a){function c(a,b,v,w,x,y,B){var C;if(w&&(C=y?w(a,x,y,B):w(a)),void 0!==C)return C;if(!s(a))return a;var E=p(a);if(E){if(C=m(a),!b)return i(a,C)}else{var F=l(a),G=F==z||F==A;

if(q(a))return h(a,b);if(F==D||F==u||G&&!y){if(r(a))return y?a:{};if(C=o(G?{}:a),!b)return j(a,g(C,a))}else{if(!U[F])return y?a:{};C=n(a,F,c,b)}}B||(B=new d);var H=B.get(a);if(H)return H;if(B.set(a,C),!E)var I=v?k(a):t(a);return e(I||a,function(d,e){I&&(e=d,d=a[e]),f(C,e,c(d,b,v,w,e,a,B))}),C}var d=b(37),e=b(44),f=b(51),g=b(53),h=b(71),i=b(78),j=b(80),k=b(83),l=b(89),m=b(98),n=b(99),o=b(100),p=b(140),q=b(143),r=b(102),s=b(146),t=b(150),u="[object Arguments]",v="[object Array]",w="[object Boolean]",x="[object Date]",y="[object Error]",z="[object Function]",A="[object GeneratorFunction]",B="[object Map]",C="[object Number]",D="[object Object]",E="[object RegExp]",F="[object Set]",G="[object String]",H="[object Symbol]",I="[object WeakMap]",J="[object ArrayBuffer]",K="[object DataView]",L="[object Float32Array]",M="[object Float64Array]",N="[object Int8Array]",O="[object Int16Array]",P="[object Int32Array]",Q="[object Uint8Array]",R="[object Uint8ClampedArray]",S="[object Uint16Array]",T="[object Uint32Array]",U={};U[u]=U[v]=U[J]=U[K]=U[w]=U[x]=U[L]=U[M]=U[N]=U[O]=U[P]=U[B]=U[C]=U[D]=U[E]=U[F]=U[G]=U[H]=U[Q]=U[R]=U[S]=U[T]=!0,U[y]=U[z]=U[I]=!1,a.exports=c},function(a){function c(a){return d(a)?e(a):{}}var d=b(146),e=Object.create;a.exports=c},function(a){function c(a,b,c,k){var l=-1,m=e,n=!0,o=a.length,p=[],q=b.length;if(!o)return p;c&&(b=g(b,h(c))),k?(m=f,n=!1):b.length>=j&&(m=i,n=!1,b=new d(b));a:for(;++l<o;){var r=a[l],s=c?c(r):r;if(r=k||0!==r?r:0,n&&s===s){for(var t=q;t--;)if(b[t]===s)continue a;p.push(r)}else m(b,s,k)||p.push(r)}return p}var d=b(36),e=b(45),f=b(46),g=b(47),h=b(66),i=b(68),j=200;a.exports=c},function(a){function c(a,b,f,g,h){var i=-1,j=a.length;for(f||(f=e),h||(h=[]);++i<j;){var k=a[i];b>0&&f(k)?b>1?c(k,b-1,f,g,h):d(h,k):g||(h[h.length]=k)}return h}var d=b(48),e=b(101);a.exports=c},function(a){function c(a,b,c){var f=b(a);return e(a)?f:d(f,c(a))}var d=b(48),e=b(140);a.exports=c},function(a){function c(a,b){return null!=a&&(f.call(a,b)||"object"==typeof a&&b in a&&null===d(a))}var d=b(87),e=Object.prototype,f=e.hasOwnProperty;a.exports=c},function(a){function c(a,b,c){if(b!==b)return d(a,c);for(var e=c-1,f=a.length;++e<f;)if(a[e]===b)return e;return-1}var d=b(97);a.exports=c},function(a){function c(a){if(!g(a)||f(a))return!1;var b=d(a)||e(a)?n:j;return b.test(h(a))}var d=b(144),e=b(102),f=b(106),g=b(146),h=b(130),i=/[\\^$.*+?()[\]{}|]/g,j=/^\[object .+?Constructor\]$/,k=Object.prototype,l=Function.prototype.toString,m=k.hasOwnProperty,n=RegExp("^"+l.call(m).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");a.exports=c},function(a){function b(a){return c(Object(a))}var c=Object.keys;a.exports=b},function(a){function c(a){a=null==a?a:Object(a);var b=[];for(var c in a)b.push(c);return b}var d=b(34),e=b(108),f=Object.prototype,g=d?d.enumerate:void 0,h=f.propertyIsEnumerable;g&&!h.call({valueOf:1},"valueOf")&&(c=function(a){return e(g(a))}),a.exports=c},function(a){function b(a){return function(b){return null==b?void 0:b[a]}}a.exports=b},function(a){function b(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}a.exports=b},function(a){function b(a){return function(b){return a(b)}}a.exports=b},function(a){function b(a,b,c){for(var d=-1,e=a.length,f=b.length,g={};++d<e;){var h=f>d?b[d]:void 0;c(g,a[d],h)}return g}a.exports=b},function(a){function b(a,b){return a.has(b)}a.exports=b},function(a){function b(a){return a&&a.Object===Object?a:null}a.exports=b},function(a){function c(a){var b=new a.constructor(a.byteLength);return new d(b).set(new d(a)),b}var d=b(39);a.exports=c},function(a){function b(a,b){if(b)return a.slice();var c=new a.constructor(a.length);return a.copy(c),c}a.exports=b},function(a){function c(a,b){var c=b?d(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}var d=b(70);a.exports=c},function(a){function c(a,b,c){var g=b?c(f(a),!0):f(a);return e(g,d,new a.constructor)}var d=b(41),e=b(49),f=b(119);a.exports=c},function(a){function b(a){var b=new a.constructor(a.source,c.exec(a));return b.lastIndex=a.lastIndex,b}var c=/\w*$/;a.exports=b},function(a){function c(a,b,c){var g=b?c(f(a),!0):f(a);return e(g,d,new a.constructor)}var d=b(42),e=b(49),f=b(124);a.exports=c},function(a){function c(a){return f?Object(f.call(a)):{}}var d=b(38),e=d?d.prototype:void 0,f=e?e.valueOf:void 0;a.exports=c},function(a){function c(a,b){var c=b?d(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}var d=b(70);a.exports=c},function(a){function b(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}a.exports=b},function(a){function c(a,b,c,e){c||(c={});for(var f=-1,g=b.length;++f<g;){var h=b[f],i=e?e(c[h],a[h],h,c,a):a[h];d(c,h,i)}return c}var d=b(51);a.exports=c},function(a){function c(a,b){return d(a,e(a),b)}var d=b(79),e=b(88);a.exports=c},function(a){var c=b(121),d=c["__core-js_shared__"];a.exports=d},function(a){function c(a){return e(function(b,c){var e=-1,f=c.length,g=f>1?c[f-1]:void 0,h=f>2?c[2]:void 0;for(g=a.length>3&&"function"==typeof g?(f--,g):void 0,h&&d(c[0],c[1],h)&&(g=3>f?void 0:g,f=1),b=Object(b);++e<f;){var i=c[e];i&&a(b,i,e,g)}return b})}var d=b(104),e=b(152);a.exports=c},function(a){function c(a){return d(a,f,e)}var d=b(58),e=b(88),f=b(150);a.exports=c},function(a){var c=b(64),d=c("length");a.exports=d},function(a){function c(a,b){var c=a.__data__;return d(b)?c["string"==typeof b?"string":"hash"]:c.map}var d=b(105);a.exports=c},function(a){function c(a,b){var c=e(a,b);return d(c)?c:void 0}var d=b(61),e=b(90);a.exports=c},function(a){function b(a){return c(Object(a))}var c=Object.getPrototypeOf;a.exports=b},function(a){function c(a){return e(Object(a))}var d=b(153),e=Object.getOwnPropertySymbols;e||(c=d),a.exports=c},function(a){function c(a){return q.call(a)}var d=b(28),e=b(31),f=b(33),g=b(35),h=b(40),i=b(130),j="[object Map]",k="[object Object]",l="[object Promise]",m="[object Set]",n="[object WeakMap]",o="[object DataView]",p=Object.prototype,q=p.toString,r=i(d),s=i(e),t=i(f),u=i(g),v=i(h);(d&&c(new d(new ArrayBuffer(1)))!=o||e&&c(new e)!=j||f&&c(f.resolve())!=l||g&&c(new g)!=m||h&&c(new h)!=n)&&(c=function(a){var b=q.call(a),c=b==k?a.constructor:void 0,d=c?i(c):void 0;if(d)switch(d){case r:return o;case s:return j;case t:return l;case u:return m;case v:return n}return b}),a.exports=c},function(a){function b(a,b){return null==a?void 0:a[b]}a.exports=b},function(a){function c(){this.__data__=d?d(null):{}}var d=b(120);a.exports=c},function(a){function b(a){return this.has(a)&&delete this.__data__[a]}a.exports=b},function(a){function c(a){var b=this.__data__;if(d){var c=b[a];return c===e?void 0:c}return g.call(b,a)?b[a]:void 0}var d=b(120),e="__lodash_hash_undefined__",f=Object.prototype,g=f.hasOwnProperty;a.exports=c},function(a){function c(a){var b=this.__data__;return d?void 0!==b[a]:f.call(b,a)}var d=b(120),e=Object.prototype,f=e.hasOwnProperty;a.exports=c},function(a){function c(a,b){var c=this.__data__;return c[a]=d&&void 0===b?e:b,this}var d=b(120),e="__lodash_hash_undefined__";a.exports=c},function(a){function c(a){var b=a?a.length:void 0;return g(b)&&(f(a)||h(a)||e(a))?d(b,String):null}var d=b(65),e=b(139),f=b(140),g=b(145),h=b(148);a.exports=c},function(a){function b(a,b,c){for(var d=a.length,e=b+(c?1:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}a.exports=b},function(a){function b(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&d.call(a,"index")&&(c.index=a.index,c.input=a.input),c}var c=Object.prototype,d=c.hasOwnProperty;a.exports=b},function(a){function c(a,b,c,D){var E=a.constructor;switch(b){case s:return d(a);case k:case l:return new E(+a);case t:return e(a,D);case u:case v:case w:case x:case y:case z:case A:case B:case C:return j(a,D);case m:return f(a,D,c);case n:case q:return new E(a);case o:return g(a);case p:return h(a,D,c);case r:return i(a)}}var d=b(70),e=b(72),f=b(73),g=b(74),h=b(75),i=b(76),j=b(77),k="[object Boolean]",l="[object Date]",m="[object Map]",n="[object Number]",o="[object RegExp]",p="[object Set]",q="[object String]",r="[object Symbol]",s="[object ArrayBuffer]",t="[object DataView]",u="[object Float32Array]",v="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",y="[object Int32Array]",z="[object Uint8Array]",A="[object Uint8ClampedArray]",B="[object Uint16Array]",C="[object Uint32Array]";a.exports=c},function(a){function c(a){return"function"!=typeof a.constructor||f(a)?{}:d(e(a))}var d=b(55),e=b(87),f=b(107);a.exports=c},function(a){function c(a){return e(a)||d(a)}var d=b(139),e=b(140);a.exports=c},function(a){function b(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(c){}return b}a.exports=b},function(a){function b(a,b){return b=null==b?c:b,!!b&&("number"==typeof a||d.test(a))&&a>-1&&a%1==0&&b>a}var c=9007199254740991,d=/^(?:0|[1-9]\d*)$/;a.exports=b},function(a){function c(a,b,c){if(!g(c))return!1;var h=typeof b;return("number"==h?e(c)&&f(b,c.length):"string"==h&&b in c)?d(c[b],a):!1}var d=b(137),e=b(141),f=b(103),g=b(146);a.exports=c},function(a){function b(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}a.exports=b},function(a){function c(a){return!!e&&e in a}var d=b(81),e=function(){var a=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();a.exports=c},function(a){function b(a){var b=a&&a.constructor,d="function"==typeof b&&b.prototype||c;return a===d}var c=Object.prototype;a.exports=b},function(a){function b(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}a.exports=b},function(a){function b(){this.__data__=[]}a.exports=b},function(a){function c(a){var b=this.__data__,c=d(b,a);if(0>c)return!1;var e=b.length-1;return c==e?b.pop():f.call(b,c,1),!0}var d=b(52),e=Array.prototype,f=e.splice;a.exports=c},function(a){function c(a){var b=this.__data__,c=d(b,a);return 0>c?void 0:b[c][1]}var d=b(52);a.exports=c},function(a){function c(a){return d(this.__data__,a)>-1}var d=b(52);a.exports=c},function(a){function c(a,b){var c=this.__data__,e=d(c,a);return 0>e?c.push([a,b]):c[e][1]=b,this}var d=b(52);a.exports=c},function(a){function c(){this.__data__={hash:new d,map:new(f||e),string:new d}}var d=b(29),e=b(30),f=b(31);a.exports=c},function(a){function c(a){return d(this,a)["delete"](a)}var d=b(85);a.exports=c},function(a){function c(a){return d(this,a).get(a)}var d=b(85);a.exports=c},function(a){function c(a){return d(this,a).has(a)}var d=b(85);a.exports=c},function(a){function c(a,b){return d(this,a).set(a,b),this}var d=b(85);a.exports=c},function(a){function b(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}a.exports=b},function(a){var c=b(86),d=c(Object,"create");a.exports=d},function(a){var d=b(69),e=d("object"==typeof c&&c),f=d("object"==typeof self&&self),g=d("object"==typeof this&&this),h=e||f||g||Function("return this")();a.exports=h},function(a){function b(a){return this.__data__.set(a,c),this}var c="__lodash_hash_undefined__";a.exports=b},function(a){function b(a){return this.__data__.has(a)}a.exports=b},function(a){function b(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}a.exports=b},function(a){function c(){this.__data__=new d}var d=b(30);a.exports=c},function(a){function b(a){return this.__data__["delete"](a)}a.exports=b},function(a){function b(a){return this.__data__.get(a)}a.exports=b},function(a){function b(a){return this.__data__.has(a)}a.exports=b},function(a){function c(a,b){var c=this.__data__;return c instanceof d&&c.__data__.length==f&&(c=this.__data__=new e(c.__data__)),c.set(a,b),this}var d=b(30),e=b(32),f=200;a.exports=c},function(a){function b(a){if(null!=a){try{return c.call(a)}catch(b){}try{return a+""}catch(b){}}return""}var c=Function.prototype.toString;a.exports=b},function(a){var c=b(51),d=b(79),e=b(82),f=b(141),g=b(107),h=b(151),i=Object.prototype,j=i.propertyIsEnumerable,k=!j.call({valueOf:1},"valueOf"),l=e(function(a,b){if(k||g(b)||f(b))return void d(b,h(b),a);for(var e in b)c(a,e,b[e])});a.exports=l},function(a){var c=b(79),d=b(82),e=b(151),f=d(function(a,b,d,f){c(b,e(b),a,f)});a.exports=f},function(a){function c(a){return d(a,!1,!0)}var d=b(54);a.exports=c},function(a){function c(a){return d(a,!0,!0)}var d=b(54);a.exports=c},function(a){var c=b(43),d=b(50),e=b(132),f=b(152),g=f(function(a){return a.push(void 0,d),c(e,void 0,a)});a.exports=g},function(a){var c=b(56),d=b(57),e=b(142),f=b(152),g=f(function(a,b){return e(a)?c(a,d(b,1,e,!0)):[]});a.exports=g},function(a){function b(a,b){return a===b||a!==a&&b!==b}a.exports=b},function(a){a.exports=b(131)},function(a){function c(a){return d(a)&&g.call(a,"callee")&&(!i.call(a,"callee")||h.call(a)==e)}var d=b(142),e="[object Arguments]",f=Object.prototype,g=f.hasOwnProperty,h=f.toString,i=f.propertyIsEnumerable;a.exports=c},function(a){var b=Array.isArray;a.exports=b},function(a){function c(a){return null!=a&&f(d(a))&&!e(a)}var d=b(84),e=b(144),f=b(145);a.exports=c},function(a){function c(a){return e(a)&&d(a)}var d=b(141),e=b(147);a.exports=c},function(a,c){var d=b(121),e=b(154),f="object"==typeof c&&c,g=f&&"object"==typeof a&&a,h=g&&g.exports===f,i=h?d.Buffer:void 0,j=i?function(a){return a instanceof i}:e;a.exports=j},function(a){function c(a){var b=d(a)?h.call(a):"";return b==e||b==f}var d=b(146),e="[object Function]",f="[object GeneratorFunction]",g=Object.prototype,h=g.toString;a.exports=c},function(a){function b(a){return"number"==typeof a&&a>-1&&a%1==0&&c>=a}var c=9007199254740991;a.exports=b},function(a){function b(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}a.exports=b},function(a){function b(a){return!!a&&"object"==typeof a}a.exports=b},function(a){function c(a){return"string"==typeof a||!d(a)&&e(a)&&h.call(a)==f}var d=b(140),e=b(147),f="[object String]",g=Object.prototype,h=g.toString;a.exports=c},function(a){function c(a){return"symbol"==typeof a||d(a)&&g.call(a)==e}var d=b(147),e="[object Symbol]",f=Object.prototype,g=f.toString;a.exports=c},function(a){function c(a){var b=i(a);if(!b&&!g(a))return e(a);var c=f(a),j=!!c,k=c||[],l=k.length;for(var m in a)!d(a,m)||j&&("length"==m||h(m,l))||b&&"constructor"==m||k.push(m);return k}var d=b(59),e=b(62),f=b(96),g=b(141),h=b(103),i=b(107);a.exports=c},function(a){function c(a){for(var b=-1,c=g(a),h=d(a),j=h.length,k=e(a),l=!!k,m=k||[],n=m.length;++b<j;){var o=h[b];l&&("length"==o||f(o,n))||"constructor"==o&&(c||!i.call(a,o))||m.push(o)}return m}var d=b(63),e=b(96),f=b(103),g=b(107),h=Object.prototype,i=h.hasOwnProperty;a.exports=c},function(a){function c(a,b){if("function"!=typeof a)throw new TypeError(f);return b=g(void 0===b?a.length-1:e(b),0),function(){for(var c=arguments,e=-1,f=g(c.length-b,0),h=Array(f);++e<f;)h[e]=c[b+e];switch(b){case 0:return a.call(this,h);case 1:return a.call(this,c[0],h);case 2:return a.call(this,c[0],c[1],h)}var i=Array(b+1);for(e=-1;++e<b;)i[e]=c[e];return i[b]=h,d(a,this,i)}}var d=b(43),e=b(156),f="Expected a function",g=Math.max;a.exports=c},function(a){function b(){return[]}a.exports=b},function(a){function b(){return!1}a.exports=b},function(a){function c(a){if(!a)return 0===a?a:0;if(a=d(a),a===e||a===-e){var b=0>a?-1:1;return b*f}return a===a?a:0}var d=b(157),e=1/0,f=1.7976931348623157e308;a.exports=c},function(a){function c(a){var b=d(a),c=b%1;return b===b?c?b-c:b:0}var d=b(155);a.exports=c},function(a){function c(a){if("number"==typeof a)return a;if(f(a))return g;if(e(a)){var b=d(a.valueOf)?a.valueOf():a;a=e(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(h,"");var c=j.test(a);return c||k.test(a)?l(a.slice(2),c?2:8):i.test(a)?g:+a}var d=b(144),e=b(146),f=b(149),g=0/0,h=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,j=/^0b[01]+$/i,k=/^0o[0-7]+$/i,l=parseInt;a.exports=c},function(a){function c(a,b){return e(a||[],b||[],d)}var d=b(51),e=b(67);a.exports=c}],b(7)});